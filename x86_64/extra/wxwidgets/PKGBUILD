pkgname=wxwidgets
rname=wxWidgets # Typical upper case namings :/
pkgver=3.2.6
pkgrel=1
arch=(x86_64)
depends=(gst-plugins-base glu webkit2gtk libnotify  expat
	libsm libxxf86vm libnotify libglvnd gtk2+ gtk3+ gtk4+ libtiff libpng libjpeg
	libxpm sdl2 qt5 egl-wayland pcre pcre2 nanosvg zstd zlib libsoup libsoup2)
makedepends=(clang llvm)
source=(git+https://github.com/wxWidgets/wxWidgets#tag=v$pkgver)

prepare() {
	cd $rname
	git cherry-pick -n ed510012
	git cherry-pick -n 8ea22b5e
	cd ..

	mkdir gtk2 gtk3 gtk4 qt5

	cmake \
	-S $rname \
	-B gtk2 \
	-D CMAKE_INSTALL_PREFIX=/usr \
	-D CMAKE_BUILD_TYPE=Release \
	-D wxBUILD_TOOLKIT=gtk2

	cmake \
	-S $rname \
	-B gtk3 \
	-D CMAKE_INSTALL_PREFIX=/usr \
	-D CMAKE_BUILD_TYPE=Release \
	-D wxBUILD_TOOLKIT=gtk3

	cmake \
	-S $rname \
	-B gtk4 \
	-D CMAKE_INSTALL_PREFIX=/usr \
	-D CMAKE_BUILD_TYPE=Release \
	-D wxBUILD_TOOLKIT=gtk4

	cmake \
	-S $rname \
	-B qt5 \
	-D CMAKE_INSTALL_PREFIX=/usr \
	-D CMAKE_BUILD_TYPE=Release \
	-D wxBUILD_TOOLKIT=qt
}

build() {
	cmake --build gtk2
	cmake --build gtk3
	cmake --build gtk4
	cmake --build qt5
}

package() {
	DESTDIR=$pkgdir cmake --install gtk2
	DESTDIR=$pkgdir cmake --install gtk3
	DESTDIR=$pkgdir cmake --install gtk4
	DESTDIR=$pkgdir cmake --install qt5
}
