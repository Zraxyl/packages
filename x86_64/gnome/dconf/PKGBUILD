pkgname=dconf
epkgname=dconf-editor
pkgver=0.40.0
gver=0.40
ever=43.0
pkgrel=3
arch=('x86_64')
depends=(vala)
makedepends=('glib2' 'gobject-introspection' 'dbus' 'gtk+' 'libhandy' 'libxml2' 'libxslt' 'gtk-doc')
source=(https://download.gnome.org/sources/$pkgname/$gver/$pkgname-$pkgver.tar.xz
	https://gitlab.gnome.org/GNOME/dconf-editor/-/archive/$ever/dconf-editor-$ever.tar.gz)

build() {
	cd $pkgname-$pkgver
	mkdir -p build && cd build

	meson \
	--prefix=/usr \
	--buildtype=release \
	..

	ninja

	# DConf Editor
	cd $srcdir/$epkgname-$ever

	mkdir -p build && cd build

	meson \
	--prefix=/usr \
	--buildtype=release \
	..

	ninja
}

package() {
	# DConf
	cd $pkgname-$pkgver/build

	DESTDIR=$pkgdir ninja install

	## DConf Editor
	cd $srcdir/$epkgname-$ever/build

	DESTDIR=$pkgdir ninja install
}
